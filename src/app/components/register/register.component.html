<div class="container" style="margin-top: 10px">
  <div class="row">
    <div class="col-md-3">

    </div>
    <div class="col-md-6">

      <div class="container-card">
        <div class="container-card-header">
          <h3>Registrarse</h3>
        </div>
        <hr>
        <form [formGroup]="registerForm">
          <div class="form-group">
            <label for="nameInput">Nombre de usuario</label>
            <input class="form-control" type="text" name="nameInput" id="nameInput" formControlName="name"
              placeholder="Ej. makoto" required>
            <div *ngIf="registerForm.get('name')?.errors?.['exists']">
              <small class="text-alert">El nombre de usuario ya existe, debes seleccionar uno diferente.</small>
            </div>
            <div *ngIf="registerForm.get('name')?.touched && registerForm.get('name')?.value===''">
              <small class="text-alert">Nombre de usuario requerido.</small>
            </div>
          </div>
          <div class="form-group">
            <label for="emailInput">Correo electrónico</label>
            <input class="form-control" type="email" name="emailInput" id="emailInput" formControlName="email"
              placeholder="Ej. name@example.com" required>
            <div *ngIf="registerForm.get('email')?.errors?.['email']">
              <small class="text-alert">Por favor ingresa un correo electrónico valido.</small>
            </div>
            <div *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.value ===''">
              <small class="text-alert">Correo es requerido</small>
            </div>

          </div>
          <div class="form-group">
            <label for="emailInput">Contraseña</label>
            <input class="form-control" type="password" name="passwordInput" id="passwordInput"
              formControlName="password" placeholder="******" required>


            <div
              *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.dirty || registerForm.get('password')?.touched)">
              <div *ngIf="registerForm.get('password')?.errors?.['minlength']">
                <small class="text-alert">La contraseña debe tener al menos 8 carácteres</small>
              </div>
              <div *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.value ===''">
                <small class="text-alert">Contraseña requerida</small>
              </div>
              <div *ngIf="registerForm.get('password')?.errors?.['pattern']">
                <small class="text-alert">La contraseña debe tener al menos una mayúscula, un número y un carácter especial</small>
              </div>
            </div>

          </div>
          <div class="form-group">
            <label for="emailInput">Confirmar contraseña</label>
            <input class="form-control" type="password" name="confirmPassword" id="confirmPassword"
              formControlName="confirmPassword" placeholder="******" required>
              <div *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']">
                <small class="text-alert">Contraseñas no coinciden</small>
              </div>
          </div>
          <h4><strong>Categorias</strong></h4>
          
          <div *ngFor="let categoria of categories; let i = index"> 
            <div class="form-check">
              <label>
              <input  [value]="categoria" type="checkbox" formArrayName="category">
              {{categoria}}
              </label>
            </div>
          </div>
          <div *ngIf="registerForm.get('category')?.invalid && (registerForm.get('category')?.dirty || registerForm.get('category')?.touched)" class="alert alert-danger">
            <div *ngIf="registerForm.get('category')?.errors?.['required']">
              Categorías es obligatorio.
            </div>
            <div *ngIf="registerForm.get('category')?.errors?.['minSelections']">
              Se requieren al menos 3 categorías seleccionadas.
            </div>
          </div>

          <br>

          <div class="row" style="margin-left: -19px; margin-right: -19px; padding: 20px; background: #f1f0f0">
            <div class="col-md-8 col-xs-12 button-login">
              <a routerLink="/login" href="#">Iniciar sesión</a>
            </div>
            <div class="col-md-4 col-xs-12">
              <pichincha-button (clickbutton)="register()"  size="small" id="idButton"
                color="primary">
                Registrarse
              </pichincha-button>
            </div>
          </div>

        </form>

      </div>


    </div>
    <div class="col-md-3">

    </div>
  </div>
</div>
